<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Relat√≥rio Preditivo ‚Äì Escrit√≥rio Tribut√°rio</title>
  <style>
    /* Reset b√°sico */
    * { margin:0; padding:0; box-sizing: border-box; }
    body {
      background: #0d0f12;
      color: #e0e0e0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }
    header {
      position: relative;
      padding: 20px;
      text-align: center;
      background: linear-gradient(90deg, #00ff99, #00cc66);
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      transform: perspective(600px) rotateX(5deg);
    }
    header img.logo {
      height: 80px;
      /* coloque a sua logo aqui */
    }
    header h1 {
      margin-top: 15px;
      font-size: 2.5em;
      color: #ffffff;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.7);
    }
    nav#presenterNotesIcon {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: #00ff66;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
      z-index: 1000;
      transition: transform 0.3s;
    }
    nav#presenterNotesIcon:hover {
      transform: scale(1.2);
    }
    nav#presenterNotesIcon:before {
      content: "üõà";
      font-size: 1.8em;
      color: #0d0f12;
    }
    /* painel lateral de notas do apresentador */
    #presenterNotesPanel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100%;
      background: #1a1d22;
      color: #cfd8dc;
      box-shadow: -4px 0 20px rgba(0,0,0,0.7);
      transition: right 0.4s;
      padding: 20px;
      overflow-y: auto;
      z-index: 999;
    }
    #presenterNotesPanel h2 {
      margin-bottom:10px;
      color: #00ff99;
    }
    #presenterNotesPanel .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5em;
      cursor: pointer;
      color: #00ff99;
    }
    main {
      padding: 40px;
      max-width: 1200px;
      margin: auto;
    }
    section {
      margin-bottom: 60px;
      position: relative;
    }
    section h2, section h3 {
      font-weight: 600;
      margin-bottom: 20px;
      color: #00ff99;
      cursor: default;
    }
    section h2:hover, section h3:hover {
      color: #66ffcc;
    }
    /* tooltip base */
    .tooltip {
      position: absolute;
      background: rgba(0, 255, 102, 0.9);
      color: #0d0f12;
      padding: 8px 12px;
      border-radius: 4px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
      font-size: 0.9em;
      max-width: 300px;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }
    /* KPI cards */
    .kpi-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .kpi-card {
      background: #1f2227;
      border: 2px solid #00ff99;
      border-radius: 10px;
      flex: 1 1 calc(33% - 40px);
      min-width: 250px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      transition: transform 0.3s;
      position: relative;
    }
    .kpi-card:hover {
      transform: translateY(-10px) scale(1.02);
      border-color: #66ffcc;
    }
    .kpi-card .value {
      font-size: 2.5em;
      color: #ffffff;
      margin: 15px 0;
    }
    .kpi-card .subtitle {
      font-size: 1.2em;
      color: #cfd8dc;
    }
    /* gr√°fico simulado */
    .chart {
      width: 100%;
      height: 400px;
      background: #1a1d22;
      border: 2px solid #00ff99;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      position: relative;
      overflow: hidden;
      perspective: 800px;
      margin-top:20px;
    }
    .chart-canvas {
      width: 100%;
      height: 100%;
    }
    footer {
      text-align: center;
      padding: 30px;
      color: #777;
    }
  </style>
</head>
<body>

  <header>
    <!-- troque src abaixo pela sua logo -->
    <img src="logo.png" alt="Logo Escrit√≥rio Tribut√°rio" class="logo">
    <h1>Relat√≥rio Preditivo ‚Äì Escrit√≥rio Tribut√°rio</h1>
  </header>

  <nav id="presenterNotesIcon"></nav>

  <div id="presenterNotesPanel">
    <span class="close-btn">‚úñ</span>
    <h2>Notas do Apresentador</h2>
    <p><strong>O que √© este relat√≥rio:</strong> Apresenta uma vis√£o preditiva da opera√ß√£o tribut√°ria do escrit√≥rio, com proje√ß√µes, riscos, produtividade e valores disputados, para suportar decis√µes estrat√©gicas.</p>
    <p><strong>Objetivo:</strong> Fornecer ao s√≥cio informa√ß√µes antecipadas para prioriza√ß√£o de recursos, mitiga√ß√£o de riscos e otimiza√ß√£o operacional.</p>
    <p><strong>Para que serve:</strong></p>
    <ul>
      <li>Identificar onde h√° risco de perda elevado e agir preventivamente.</li>
      <li>Simular valores recuper√°veis dispon√≠veis para planejar or√ßamentos.</li>
      <li>Melhorar prazos e produtividade com base em dados hist√≥ricos e predi√ß√µes.</li>
      <li>Apoiar decis√µes de investimento (ex: automa√ß√£o, contrata√ß√£o) para ganhos tang√≠veis.</li>
    </ul>
    <p><strong>O que mostra:</strong></p>
    <ul>
      <li>KPI‚Äôs principais: Valor em disputa, risco de perda, cumprimento de prazos, previs√£o de valor recuperado;</li>
      <li>Modelos usados: classifica√ß√£o (Random Forest), s√©ries temporais (Prophet) ‚Äî exemplos simulados;</li>
      <li>Visualiza√ß√µes: gr√°ficos de linha, ranking de produtividade, mapa de risco por cliente, etc;</li>
      <li>Insights estrat√©gicos gerados automaticamente a partir dos dados simulados.</li>
    </ul>
  </div>

  <main>
    <section id="objetivo">
      <h2 data-tooltip="Meta deste relat√≥rio para fornecer vis√£o avan√ßada ao s√≥cio">1. Objetivo</h2>
      <p>Fornecer ao s√≥cio uma vis√£o preditiva da opera√ß√£o tribut√°ria, com previs√µes de valores, riscos e produtividade. Esse relat√≥rio orienta decis√µes estrat√©gicas do escrit√≥rio.</p>
    </section>

    <section id="pipeline">
      <h2 data-tooltip="Como os dados s√£o processados antes da visualiza√ß√£o">2. Pipeline de Dados</h2>
      <p>O pipeline integra dados financeiros, processuais, de produtividade e CRM. As etapas s√£o:</p>
      <ul>
        <li>Ingest√£o</li>
        <li>Transforma√ß√£o</li>
        <li>Armazenamento</li>
        <li>Modelagem Preditiva</li>
        <li>Visualiza√ß√£o</li>
      </ul>
    </section>

    <section id="kpis">
      <h2 data-tooltip="Principais m√©tricas que orientam performance e riscos">3. M√©tricas e KPIs</h2>
      <div class="kpi-cards">
        <div class="kpi-card" data-tooltip="Total estimado em disputa atualmente">
          <div class="subtitle">Valor em Disputa</div>
          <div class="value">R$‚ÄØ120‚ÄØM</div>
        </div>
        <div class="kpi-card" data-tooltip="Estimativa de quanto pode ser perdido se n√£o forem tratadas a√ß√µes corretivas">
          <div class="subtitle">Risco de Perda</div>
          <div class="value">R$‚ÄØ35‚ÄØM a recuperar</div>
        </div>
        <div class="kpi-card" data-tooltip="Percentual de casos com prazos sendo respeitados">
          <div class="subtitle">Cumprimento de Prazos</div>
          <div class="value">92%</div>
        </div>
        <div class="kpi-card" data-tooltip="Prazo m√©dio atual de resposta em dias">
          <div class="subtitle">Prazo M√©dio de Resposta</div>
          <div class="value">4,2 dias</div>
        </div>
        <div class="kpi-card" data-tooltip="Valor atual estimado para recupera√ß√£o">
          <div class="subtitle">Valor Atual</div>
          <div class="value">R$‚ÄØ18‚ÄØM (¬±5%)</div>
        </div>
        <div class="kpi-card" data-tooltip="Previs√£o de valor recuperado at√© Q4">
          <div class="subtitle">Previs√£o</div>
          <div class="value">R$‚ÄØ95‚ÄØM</div>
        </div>
      </div>
    </section>

    <section id="modelos">
      <h2 data-tooltip="T√©cnicas usadas para predizer resultados futuros">4. Modelos Preditivos (Simula√ß√£o)</h2>
      <p><strong>Classifica√ß√£o de Processos (Random Forest) ‚Äì Acur√°cia: 87%</strong>. Exemplo: A√ß√£o X (78% chance de ganho), A√ß√£o Y (42% chance de ganho).</p>
      <p><strong>S√©ries Temporais (Prophet)</strong> ‚Äì Proje√ß√£o de aumento de 12% no valor recuperado at√© Q4.</p>
    </section>

    <section id="visualizacao">
      <h2 data-tooltip="O que o dashboard visual mostrar√° para suportar insights">5. Visualiza√ß√£o e Insights</h2>
      
      <div class="chart" data-tooltip="Gr√°fico simulado de valor recuperado ao longo do tempo">
        <canvas id="chartValueForecast" class="chart-canvas"></canvas>
      </div>
      
      <div style="margin-top:40px;">
        <h3 data-tooltip="Principais descobertas estrat√©gicas baseadas nos dados">Insights</h3>
        <ul>
          <li data-tooltip="Se focarmos em processos > R$ 5‚ÄØM podemos aumentar recupera√ß√£o em 18%">Priorizar a√ß√µes &gt; R$‚ÄØ5‚ÄØM aumenta recupera√ß√£o em 18%</li>
          <li data-tooltip="Alta concentra√ß√£o de valores em disputa em clientes com risco alto">63% dos valores em disputa concentram-se em clientes de risco alto</li>
          <li data-tooltip="Automa√ß√£o diminui prazos m√©dios significativamente">Automa√ß√£o reduz prazos em 26%</li>
        </ul>
      </div>
    </section>

    <section id="conclusao">
      <h2 data-tooltip="Resumo final das proje√ß√µes e recomenda√ß√µes">6. Conclus√£o</h2>
      <p>O escrit√≥rio pode recuperar at√© <strong>R$‚ÄØ35‚ÄØM em 12 meses</strong>, possui risco de perda de <strong>R$‚ÄØ18‚ÄØM</strong> concentrado em poucos clientes e pode melhorar a performance operacional em <strong>26% com automa√ß√£o</strong>.</p>
    </section>
  </main>

  <footer>
    &copy; 2025 Escrit√≥rio Tribut√°rio ‚Äì Todos os direitos reservados
  </footer>

  <!-- tooltip element -->
  <div id="tooltip" class="tooltip"></div>

  <script>
    // Apresentador Notes: l√≥gica de abrir/fechar painel
    const presenterIcon = document.getElementById('presenterNotesIcon');
    const presenterPanel = document.getElementById('presenterNotesPanel');
    const closeBtn = document.querySelector('#presenterNotesPanel .close-btn');

    presenterIcon.addEventListener('click', () => {
      presenterPanel.style.right = '0';
    });
    closeBtn.addEventListener('click', () => {
      presenterPanel.style.right = '-400px';
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && presenterPanel.style.right === '0px') {
        presenterPanel.style.right = '-400px';
      }
    });

    // Tooltip hover logic
    const tooltip = document.getElementById('tooltip');
    const tooltipElements = document.querySelectorAll('[data-tooltip]');

    tooltipElements.forEach(el => {
      el.addEventListener('mouseenter', (e) => {
        const text = el.getAttribute('data-tooltip');
        tooltip.textContent = text;
        const rect = el.getBoundingClientRect();
        // posiciona acima do elemento
        const top = window.scrollY + rect.top - 10;
        const left = window.scrollX + rect.left + (rect.width / 2);
        tooltip.style.top = (top - tooltip.offsetHeight) + 'px';
        tooltip.style.left = (left - (tooltip.offsetWidth / 2)) + 'px';
        tooltip.style.opacity = '1';
      });
      el.addEventListener('mouseleave', (e) => {
        tooltip.style.opacity = '0';
      });
    });

    // Simula√ß√£o de gr√°fico com Canvas (linha temporal do valor recuperado)
    const ctx = document.getElementById('chartValueForecast').getContext('2d');

    // dados simulados
    const labels = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
    const dataAtual = [5, 8, 12, 15, 18, 21, 22, 24, 26, 28, 30, 32]; // em milh√µes
    const dataPrevisto = dataAtual.map((v, i) => v * (1 + 0.12 * (i / 11))); // crescendo at√© +12%

    // desenhar com Canvas puro
    function drawLineChart(ctx, labels, data1, data2) {
      const width = ctx.canvas.width;
      const height = ctx.canvas.height;
      ctx.clearRect(0,0,width,height);

      // setup
      const padding = 50;
      const maxVal = Math.max(...data2) * 1.1;
      const xStep = (width - 2*padding) / (labels.length - 1);
      const yScale = (height - 2*padding) / maxVal;

      // eixos
      ctx.strokeStyle = '#666';
      ctx.lineWidth = 1;
      // eixo Y
      ctx.beginPath();
      ctx.moveTo(padding, padding);
      ctx.lineTo(padding, height - padding);
      ctx.lineTo(width - padding, height - padding);
      ctx.stroke();

      // linhas de grade horizontais
      ctx.strokeStyle = '#333';
      for (let i=0; i<=5; i++) {
        let y = padding + ((height - 2*padding) /5) * i;
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(width - padding, y);
        ctx.stroke();
      }

      // plot linhas
      // linha atual
      ctx.strokeStyle = '#00ff99';
      ctx.lineWidth = 3;
      ctx.beginPath();
      data1.forEach((val, i) => {
        let x = padding + xStep * i;
        let y = height - padding - (val * yScale);
        if (i===0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();

      // linha prevista
      ctx.strokeStyle = '#66ffcc';
      ctx.lineWidth = 3;
      ctx.setLineDash([10,5]);
      ctx.beginPath();
      dataPrevisto.forEach((val, i) => {
        let x = padding + xStep * i;
        let y = height - padding - (val * yScale);
        if (i===0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
      ctx.stroke();
      ctx.setLineDash([]);

      // pontos
      dataPrevisto.forEach((val, i) => {
        let x = padding + xStep * i;
        let y = height - padding - (val * yScale);
        ctx.beginPath();
        ctx.arc(x, y, 4, 0, 2 * Math.PI);
        ctx.fillStyle = '#66ffcc';
        ctx.fill();
      });

      dataAtual.forEach((val, i) => {
        let x = padding + xStep * i;
        let y = height - padding - (val * yScale);
        ctx.beginPath();
        ctx.arc(x, y, 4, 0, 2 * Math.PI);
        ctx.fillStyle = '#00ff99';
        ctx.fill();
      });

      // r√≥tulos do eixo X
      ctx.fillStyle = '#ccc';
      ctx.font = '14px sans-serif';
      labels.forEach((lab, i) => {
        let x = padding + xStep * i;
        let y = height - padding + 20;
        ctx.fillText(lab, x - 10, y);
      });

      // r√≥tulos de eixo Y
      ctx.save();
      ctx.translate(padding - 40, height/2);
      ctx.rotate(-Math.PI/2);
      ctx.fillText('Valor Recuperado (Milh√µes de R$)', 0, 0);
      ctx.restore();

      // legenda
      ctx.fillStyle = '#00ff99';
      ctx.fillRect(width - padding - 200, padding + 10, 15, 15);
      ctx.fillStyle = '#ccc';
      ctx.fillText('Atual', width - padding - 180, padding + 22);

      ctx.fillStyle = '#66ffcc';
      ctx.fillRect(width - padding - 200, padding + 40, 15, 15);
      ctx.fillStyle = '#ccc';
      ctx.fillText('Previsto (+12%)', width - padding - 180, padding + 52);
    }

    // redimensionar canvas para retina / dimensionamento
    function resizeCanvas(canvas) {
      const ratio = window.devicePixelRatio || 1;
      const width = canvas.clientWidth * ratio;
      const height = canvas.clientHeight * ratio;
      if (canvas.width !== width || canvas.height !== height) {
        canvas.width = width;
        canvas.height = height;
      }
    }

    function renderChart() {
      const canvas = document.getElementById('chartValueForecast');
      resizeCanvas(canvas);
      drawLineChart(canvas.getContext('2d'), labels, dataAtual, dataPrevisto);
    }

    window.addEventListener('load', renderChart);
    window.addEventListener('resize', renderChart);

  </script>
</body>
</html>


